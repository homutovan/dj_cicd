name: Django project deploy

on:
  push:
    branches: [master]

defaults:
  run:
    working-directory: /opt/app/dj_cicd

jobs:
  server_update:
    name: Доставка изменений
    runs-on: ubuntu-latest
    steps:
      - name: Запуск скрипта обновления
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USERNAME }}
          password: ${{ secrets.PASSWORD }}
          script: bash /opt/app/dj_cicd/update.sh

# jobs:
#   tests:
#     steps:
#      - name: Деплой
#        uses: appleboy/ssh-action@master
#        with:
#          host: ${{ secrets.HOST }}
#          username: ${{ secrets.USERNAME }}
#          password: ${{ secrets.PASSWORD }}
#          script: expect /home/adilet/url_shortener/pull.exp
